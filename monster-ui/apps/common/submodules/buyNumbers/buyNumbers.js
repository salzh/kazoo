define(["require","jquery","underscore","monster","toastr","ddslick"],function(e){var r=e("jquery"),n=e("underscore"),t=e("monster"),s=e("toastr"),a=(e("ddslick"),{externalScripts:["buyNumbers-googleMapsLoader"],requests:{"phonebook.search":{apiRoot:t.config.api.phonebook,url:"numbers/us/search?prefix={pattern}&limit={limit}&offset={offset}",verb:"GET"},"phonebook.searchBlocks":{apiRoot:t.config.api.phonebook,url:"blocks/us/search?prefix={pattern}&limit={limit}&offset={offset}&size={size}",verb:"GET"},"phonebook.searchByAddress":{apiRoot:t.config.api.phonebook,url:"locality/address",verb:"POST",generateError:!1}},subscribe:{"common.buyNumbers":"buyNumbersRender"},appFlags:{searchLimit:100,selectedCountryCode:"US",isPhonebookConfigured:t.config.api.hasOwnProperty("phonebook"),isSelectedNumbersEmpty:!0},buyNumbersRender:function(e){var r=this,e=e||{},n={searchType:e.searchType||"regular",singleSelect:e.singleSelect||!1};r.assignedAccountId=e.accountId||r.accountId,r.buyNumbersGetAvailableCountries(function(t){n.availableCountries=t,r.buyNumbersShowPopup(n,e.callbacks)})},buyNumbersGetAvailableCountries:function(e){e({US:{local:!0,toll_free:["844","855","866","877","888"],vanity:!0,prefix:1,name:"United States"}})},buyNumbersShowPopup:function(e,n){var i=this,s=e.searchType,a=(e.availableCountries,r(t.template(i,"buyNumbers-layout",{isPhonebookConfigured:i.appFlags.isPhonebookConfigured})));switch(e.popup=t.ui.dialog(a,{title:i.i18n.active().buyNumbers.buyDialogTitle,width:"600px",position:["center",20]}),r.extend(!0,e,{container:a,displayedNumbers:[],selectedNumbers:[],isSearchFunctionEnabled:!1}),a.find(".start-hidden").hide(),a.find(".regular-search").hide(),a.find(".vanity-search").hide(),a.find(".tollfree-search").hide(),s){case"tollfree":i.buyNumbersRenderTollfree(e);break;case"vanity":i.buyNumbersRenderVanity(e,n||{});break;case"regular":default:i.buyNumbersRenderRegular(e)}i.buyNumbersBindEvents(e,n||{})},buyNumbersBindEvents:function(e,i){var s=this,a=e.container,u=a.find("#search_result_div"),o=u.find(".left-div"),c=function(){var r=s.buyNumbersSelectedNumbersToArray(e.selectedNumbers,e.availableCountries[s.appFlags.selectedCountryCode].prefix),u=a.find("#processing_purchase_div");u.show(),u.find("i.fa-spinner").addClass("fa-spin"),s.buyNumbersRequestActivateBlock({data:{accountId:s.assignedAccountId,data:{numbers:r}},success:function(r){r.hasOwnProperty("success")&&!n.isEmpty(r.success)&&i.hasOwnProperty("success")&&i.success(r.success),e.popup.dialog("close")},error:function(r){if(!n.isEmpty(r)){var a=s.i18n.active().buyNumbers.partialPurchaseFailure+" "+Object.keys(r).join(" ");t.ui.alert("error",a)}e.popup.dialog("close"),i.hasOwnProperty("error")&&i.error()},cancel:function(){s.buyNumbersShowSearchResults(e),u.hide()}})};u.on("click","i.remove-number",function(n){n.preventDefault();var t=r(this),i=t.data("index"),u=t.data("array_index");e.singleSelect&&(r.each(a.find(".add-number"),function(e,n){r(this).removeClass("disabled").prop("disabled",!1)}),s.appFlags.isSelectedNumbersEmpty=!0,a.find("#single_select_info").removeClass("hidden")),e.selectedNumbers.splice(i,1),s.buyNumbersRefreshSelectedNumbersList(e),delete e.displayedNumbers[u].selected,a.find("#"+u+"_div").show()}),u.on("click","button.add-number",function(n){n.preventDefault();var t=r(this).data("array_index");e.singleSelect&&(r.each(a.find(".add-number"),function(e,n){r(this).addClass("disabled").prop("disabled",!0)}),s.appFlags.isSelectedNumbersEmpty=!1,a.find("#single_select_info").addClass("hidden")),e.selectedNumbers.push(e.displayedNumbers[t]),s.buyNumbersRefreshSelectedNumbersList(e),e.displayedNumbers[t].selected=!0,a.find("#"+t+"_div").hide("slide",{direction:"right"},300),o.children(".number-box").height()*o.children(".number-box:visible").length<=o.innerHeight()&&o.scroll()}),a.find("#buy_numbers_button").on("click",function(r){r.preventDefault();var n=s.buyNumbersGetTotalNumbers(e.selectedNumbers);n>0?(a.find("#search_top_div").hide(),a.find("#search_result_div").hide(),a.find("#check_numbers_div").show(),s.buyNumbersToggleCheckingDiv(a,!0),setTimeout(function(){s.buyNumbersToggleCheckingDiv(a,!1);var e=[];e.length>0?a.find("#check_numbers_div .unavailable-div .unavailable-numbers").empty().append(t.template(s,"buyNumbers-unavailableNumbers",{numbers:e})):(a.find("#check_numbers_div").hide(),c())},1e3)):t.ui.alert("error",s.i18n.active().buyNumbers.noSelectedNumAlert)}),a.find("#back_to_results_link").on("click",function(r){r.preventDefault(),s.buyNumbersShowSearchResults(e),a.find("#check_numbers_div").hide()}),a.find("#continue_buy_button").on("click",function(e){e.preventDefault(),a.find("#check_numbers_div").hide(),c()})},buyNumbersRenderCountrySelect:function(e,r){e.container,e.countryData;countrySelect=e.countrySelect,countrySelectFunction=e.countrySelectFunction},buyNumbersRenderVanity:function(e,n,t){var i=this,s=e.container,a=e.availableCountries,u=[];r.each(a,function(e,r){r.vanity&&("US"===e?u.splice(0,0,i.buyNumbersFormatCountryListElement(e,r)):u.push(i.buyNumbersFormatCountryListElement(e,r)))}),i.buyNumbersRenderCountrySelect({container:s,countryData:u,countrySelect:s.find("#vanity_country_select"),countrySelectFunction:function(e){var r=s.find("#vanity_search_div"),n=r.find(".vanity-input."+e.selectedData.value+"-input");r.find(".vanity-input").hide(),n.length>=1?n.show():r.find(".vanity-input.default-input").show(),r.find("#back_to_vanity_search").click()}}),s.find(".vanity-search").show(),i.buyNumbersBindVanityEvents(e,n)},buyNumbersBindVanityEvents:function(e,i){var s=this,a=e.container,u=a.find("#vanity_search_div"),o=(e.availableCountries,"");u.find(".vanity-input input").on("keydown",function(e){var n=r(this),t=n.nextAll("input").first(),i=n.prevAll("input").first();1===t.length&&this.selectionStart===n.prop("maxlength")&&(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||39==e.keyCode)?(39==e.keyCode&&e.preventDefault(),t.focus(),t[0].selectionStart=t[0].selectionEnd=0):1!==i.length||0!==this.selectionStart||8!=e.keyCode&&37!=e.keyCode||(37==e.keyCode&&e.preventDefault(),i.focus(),i[0].selectionStart=i[0].selectionEnd=i.val().length)}),u.find("#vanity_search_button").on("click",function(e){e.preventDefault();var n=u.find(".vanity-input-div"),i=r(this),a=!1;switch(n.find(".vanity-input:visible input:text").each(function(e,n){o+=r(n).val().toUpperCase()}),s.appFlags.selectedCountryCode){case"US":a=10===o.length;break;default:a=o.length>0&&o.length<=20}n.children("i").hide(),n.children("i.fa-spinner").show(),i.prop("disabled",!0),a?s.buyNumbersRequestSearchNumbers({data:{pattern:o,offset:0,limit:1},success:function(e){e&&e.length>0?(n.children("i.fa-check").show(),u.find("#vanity_buy_button").show(),u.find("#back_to_vanity_search").show(),i.hide(),n.find("input:text").prop("disabled",!0)):(n.children("i.fa-times").show(),o=""),n.children("i.fa-spinner").hide(),i.prop("disabled",!1)},error:function(){t.ui.alert("error",s.i18n.active().buyNumbers.unavailableServiceAlert),n.children("i.fa-spinner").hide(),i.prop("disabled",!1)}}):(t.ui.alert("error",s.i18n.active().buyNumbers.partialNumAlert),o="",n.children("i.fa-spinner").hide(),i.prop("disabled",!1))}),u.find("#back_to_vanity_search").on("click",function(e){e.preventDefault();var n=u.find(".vanity-input-div");n.children("i").hide(),n.find(".vanity-input:visible input:text").prop("disabled",!1).val("").first().focus(),u.find("#vanity_search_button").show(),u.find("#vanity_buy_button").hide(),r(this).hide()}),u.find("#vanity_buy_button").on("click",function(r){r.preventDefault(),o.length>0&&s.buyNumbersRequestActivateBlock({data:{accountId:s.assignedAccountId,data:{numbers:["+"+e.availableCountries[s.appFlags.selectedCountryCode].prefix+o]}},success:function(r){if(r.hasOwnProperty("success")&&!n.isEmpty(r.success))i.hasOwnProperty("success")&&i.success(r.success);else{if(!n.isEmpty(r)){var a=s.i18n.active().buyNumbers.partialPurchaseFailure+"<br/>"+Object.keys(r.error).join("<br/>");t.ui.alert("error",a)}i.hasOwnProperty("error")&&i.error()}e.popup.dialog("close")}})})},buyNumbersRenderTollfree:function(e,n){var i=this,s=e.container,a=e.availableCountries,u=[];r.each(a,function(e,r){r.toll_free&&r.toll_free.length>0&&("US"===e?u.splice(0,0,i.buyNumbersFormatCountryListElement(e,r)):u.push(i.buyNumbersFormatCountryListElement(e,r)))});var o=a[i.appFlags.selectedCountryCode].toll_free,c=s.find("#tollfree_radio_group");c.empty().append(t.template(i,"buyNumbers-tollfree",{tollfreePrefixes:o})),c.find("input:radio:first").prop("checked",!0),s.find(".tollfree-search").show(),i.buyNumbersBindTollfreeEvents(e)},buyNumbersBindTollfreeEvents:function(e){var n=this,i=e.container,s=e.availableCountries,a=i.find("#search_result_div"),u=a.find(".left-div"),o=function(e,r,n){},c=!1,l=0;i.find("#tollfree_search_button").on("click",function(d){d.preventDefault();var b=i.find('#tollfree_radio_group input[type="radio"]:checked').val();o=function(i,a,o){c=!0,u.append(t.template(n,"buyNumbers-loadingNumbers",{})),u[0].scrollTop=u[0].scrollHeight,n.buyNumbersRequestSearchNumbers({data:{pattern:b,offset:i,limit:a},success:function(t){t&&t.length>0?(r.each(t,function(r,t){var i=t.number,a="+"+s[n.appFlags.selectedCountryCode].prefix;0===i.indexOf(a)&&(i=i.substring(a.length)),e.displayedNumbers.push({array_index:e.displayedNumbers.length,number_value:i,formatted_value:n.buyNumbersFormatNumber(i,n.appFlags.selectedCountryCode)})}),l+=a):e.isSearchFunctionEnabled=!1,o&&o(),c=!1},error:function(){t.ui.alert("error",n.i18n.active().buyNumbers.unavailableServiceAlert),o&&o(),c=!1}})},e.displayedNumbers=[],e.selectedNumbers=[],l=0,e.isSearchFunctionEnabled=!0,u.empty(),o(l,n.appFlags.searchLimit,function(){n.buyNumbersRefreshDisplayedNumbersList(e),n.buyNumbersRefreshSelectedNumbersList(e)}),"none"===a.css("display")&&a.slideDown()}),u.on("scroll",function(t){var i=r(this);e.isSearchFunctionEnabled&&!c&&i.scrollTop()>=i[0].scrollHeight-i.innerHeight()-20&&o(l,n.appFlags.searchLimit,function(){n.buyNumbersRefreshDisplayedNumbersList(e)})})},buyNumbersRenderRegular:function(e,n){var t=this,i=e.container,s=e.availableCountries,a=[];r.each(s,function(e,r){r.local&&("US"===e?a.splice(0,0,t.buyNumbersFormatCountryListElement(e,r)):a.push(t.buyNumbersFormatCountryListElement(e,r)))}),t.buyNumbersRenderCountrySelect({container:i,countryData:a,countrySelect:i.find("#regular_country_select"),countrySelectFunction:function(e){}}),i.find(".regular-search").show(),t.buyNumbersBindRegularEvents(e)},buyNumbersBindRegularEvents:function(e){var n,i=this,a=e.container,u={},o=a.find("#search_result_div"),c=o.find(".left-div"),l=function(e,r,n){},d=!1,b=e.availableCountries,p=0;a.find("#city_input").autocomplete({source:function(e,t){a.find("#area_code_radio_div").empty().slideUp(),n=void 0,e.term.match(/^\d+/)||i.buyNumbersRequestSearchNumbersByCity({data:{city:e.term},success:function(e){e&&(u=e,t(r.map(u,function(e,r){return{label:r+", "+e.state+" ("+(e.prefixes.length<=2?e.prefixes.join(", "):e.prefixes.slice(0,2).join(", ")+",...")+")",value:r}}).sort(function(e,r){return e.value.toLowerCase()>r.value.toLowerCase()}).slice(0,10)))}})},minLength:2,delay:500,select:function(e,r){var s=u[r.item.value].prefixes.sort(),o=a.find("#area_code_radio_div");n=r.item.value,o.empty().append(t.template(i,"buyNumbers-areaCodes",{areaCodes:s})).find("input:radio:first").prop("checked",!0),s.length>1?o.slideDown():o.slideUp(),e.stopPropagation()}}),a.find("#seq_num_checkbox").change(function(){var e=a.find("#seq_num_input_span"),r=a.find("#search_numbers_button");this.checked?(e.slideDown(),r.animate({marginTop:"46px"})):(e.slideUp(),r.animate({marginTop:"0"}))}),a.on("keydown",'#city_input, input[name="area_code_radio"], #seq_num_input, #seq_num_checkbox',function(e){13==e.keyCode&&(a.find("#search_numbers_button").click(),r(this).blur())}),a.find("#search_numbers_button").on("click",function(u){u.preventDefault();var m=parseInt(a.find("#seq_num_input").val(),10)||1,f=a.find("#seq_num_checkbox").prop("checked"),h=a.find("#city_input").val(),y=h.match(/^\d+$/)?h:a.find('#area_code_radio_div input[type="radio"]:checked').val(),v=(h.match(/^\d{3}$/)?i.i18n.active().buyNumbers.areaCode+" "+h:n+" ("+y+")")+(f?" "+t.template(i,"!"+i.i18n.active().buyNumbers.seqNumParamLabel,{sequentialNumbers:m}):"");i.appFlags.isPhonebookConfigured&&"US"===i.appFlags.selectedCountryCode&&h.match(/^\d{5}$/)?i.buyNumbersRequestSearchAreaCodeByAddress({data:{address:parseInt(h,10)},success:function(e){a.find("#area_code_map").slideDown(400,function(){i.buyNumbersInitAreaCodeMap(e)})},error:function(){a.find("#area_code_map").slideUp(function(){r(this).empty()}),s.error(i.i18n.active().buyNumbers.zipCodeDoesNotExist)}}):!y||"US"===i.appFlags.selectedCountryCode&&!y.match(/^\d{3}$/)?t.ui.alert("error",i.i18n.active().buyNumbers.noInputAlert):!f||m>1?(l=f?function(n,s,a){d=!0,c.append(t.template(i,"buyNumbers-loadingNumbers",{})),i.buyNumbersRequestSearchBlockOfNumbers({data:{pattern:"+"+b[i.appFlags.selectedCountryCode].prefix+y,size:m,offset:n,limit:s},success:function(n){n&&n.length>0?(r.each(n,function(r,n){var t=n.start_number,s=n.end_number,a="+"+b[i.appFlags.selectedCountryCode].prefix;0===t.indexOf(a)&&(t=t.substring(a.length)),0===s.indexOf(a)&&(s=s.substring(a.length)),e.displayedNumbers.push({array_index:e.displayedNumbers.length,number_value:t+"_"+n.size,formatted_value:i.buyNumbersFormatNumber(t,i.appFlags.selectedCountryCode,s)})}),p+=s):e.isSearchFunctionEnabled=!1,a&&a(),d=!1},error:function(){t.ui.alert("error",i.i18n.active().buyNumbers.unavailableServiceAlert),a&&a(),d=!1}})}:function(n,s,a){d=!0,c.append(t.template(i,"buyNumbers-loadingNumbers",{})),c[0].scrollTop=c[0].scrollHeight,i.buyNumbersRequestSearchNumbers({data:{pattern:y,offset:n,limit:s},success:function(n){n&&n.length>0?(r.each(n,function(r,n){var t=n.number,s="+"+b[i.appFlags.selectedCountryCode].prefix;0===t.indexOf(s)&&(t=t.substring(s.length)),e.displayedNumbers.push({array_index:e.displayedNumbers.length,number_value:t,formatted_value:i.buyNumbersFormatNumber(t,i.appFlags.selectedCountryCode)})}),p+=s):e.isSearchFunctionEnabled=!1,a&&a(),d=!1},error:function(){t.ui.alert("error",i.i18n.active().buyNumbers.unavailableServiceAlert),a&&a(),d=!1}})},a.find("#search_parameters").html(v),e.displayedNumbers=[],e.selectedNumbers=[],p=0,e.isSearchFunctionEnabled=!0,c.empty(),l(p,i.appFlags.searchLimit,function(){i.buyNumbersRefreshDisplayedNumbersList(e),i.buyNumbersRefreshSelectedNumbersList(e)}),a.find("#search_top_div").slideUp(function(){o.slideDown()})):t.ui.alert("error",i.i18n.active().buyNumbers.seqNumAlert)}),a.find("#back_to_search").click(function(e){e.preventDefault(),o.find(".result-content-div .left-div").scrollTop(0),o.slideUp(function(){a.find("#search_top_div").slideDown()})}),c.on("scroll",function(n){var t=r(this);e.isSearchFunctionEnabled&&!d&&t.scrollTop()>=t[0].scrollHeight-t.innerHeight()-20&&l(p,i.appFlags.searchLimit,function(){i.buyNumbersRefreshDisplayedNumbersList(e)})})},buyNumbersFormatNumber:function(e,r,n,t){var i=this,s=e.toString(),r=r||"US",n=n?n.toString():s,a=s;switch(r){case"US":a=(t?"+"+t+" ":"")+s.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");break;default:a=(t?"+"+t:"")+s}return n.length===s.length&&n!==s&&(a+=" "+i.i18n.active().buyNumbers.to+" "+n.substr(n.length-4)),a},buyNumbersGetTotalNumbers:function(e){var n,t=0;return r.each(e,function(e,r){n=r.number_value.match(/\d+_(\d+)/),t+=n?parseInt(n[1],10):1}),t},buyNumbersFormatCountryListElement:function(e,r){return{text:r.name,value:e,imageSrc:"http://192.168.1.182:8888/number_manager/img/flags/"+e+".png"}},buyNumbersRefreshSelectedNumbersList:function(e){var r=this,n=e.container,i=t.template(r,"buyNumbers-selectedNumbers",{numbers:e.selectedNumbers,isSingleSelect:e.singleSelect}),s=r.buyNumbersGetTotalNumbers(e.selectedNumbers);n.find("#search_result_div .right-div .center-div").empty().append(i),n.find("#total_num_span").html(s),textAdded=0===s||1===s?r.i18n.active().buyNumbers.numberAddedSingle:r.i18n.active().buyNumbers.numberAddedPlural,n.find(".number-added").html(textAdded)},buyNumbersRefreshDisplayedNumbersList:function(e){var n=this,i=e.container,s=t.template(n,"buyNumbers-searchResults",{numbers:e.displayedNumbers}),a=i.find("#search_result_div .left-div");a.empty().append(s),e.singleSelect&&(n.appFlags.isSelectedNumbersEmpty||r.each(a.find(".add-number"),function(e,n){r(this).addClass("disabled").prop("disabled",!0)})),!e.isSearchFunctionEnabled&&a[0].scrollHeight>a.height()&&a.children(".number-box.number-wrapper").last().css("border-bottom","none")},buyNumbersShowSearchResults:function(e){var r=this,n=e.container,t=n.find("#search_result_div"),i=e.searchType;"tollfree"===i&&n.find("#search_top_div").show(),t.show(),r.buyNumbersRefreshDisplayedNumbersList({container:t,displayedNumbers:e.displayedNumbers,isSearchFunctionEnabled:e.isSearchFunctionEnabled}),r.buyNumbersRefreshSelectedNumbersList({container:t,selectedNumbers:e.selectedNumbers})},buyNumbersToggleCheckingDiv:function(e,r){var n=e.find("#check_numbers_div .checking-div"),t=e.find("#check_numbers_div .unavailable-div");r?(t.hide(),n.show(),n.find("i.fa-spinner").addClass("fa-spin")):(t.show(),n.hide(),n.find("i.fa-spinner").removeClass("fa-spin"))},buyNumbersSelectedNumbersToArray:function(e,r){var t=[],r=r.toString().indexOf("+")<0?"+"+r:r;return n.each(e,function(e){var n=e.number_value.match(/([0-9]+)_([0-9]+)/),s=n?n[1]:e.number_value;if(n)for(i=0;i<parseInt(n[2]);i++)t.push(r+(parseInt(s)+i));else t.push(r+s)}),t},buyNumbersInitAreaCodeMap:function(e){var r=this,t=function(){var r=new google.maps.LatLngBounds,t=new google.maps.InfoWindow,s={panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,overviewMapControl:!0},a=new google.maps.Map(document.getElementById("area_code_map"),s);n.each(e.locales,function(e,n){r.extend(i(a,t,n,e).getPosition())}),a.setCenter(r.getCenter()),a.fitBounds(r)},i=function(e,n,t,i){var s=new google.maps.LatLng(parseFloat(i.latitude),parseFloat(i.longitude)),a={animation:google.maps.Animation.DROP,areaCodes:i.prefixes,position:s,title:t,map:e},u=new google.maps.Marker(a);return u.addListener("click",function(){n.setContent("<p>"+r.i18n.active().buyNumbers.markerAreaCodes+this.title+":</p/><ul><li><b>"+this.areaCodes.join("<b/></li><li><b>")+"</b></li></ul>"),n.open(e,u)}),u};t()},buyNumbersCoerceObjectToArray:function(e){return n.isArray(e)?e:n.map(e,function(e){return e})},buyNumbersGetUniqueAreaCodes:function(e){return n.each(e,function(e,r,t){e.prefixes=n.map(e.prefixes,function(e,r){return e.substr(0,3)}),t[r].prefixes=n.uniq(e.prefixes)}),e},buyNumbersRequestActivateBlock:function(e){var n=this;n.callApi({resource:"numbers.activateBlock",data:r.extend(!0,{},e.data,{generateError:!1}),success:function(r,n,t){e.hasOwnProperty("success")&&e.success(r.data)},error:function(r,n,t){"402"!==r.error&&"string"!=typeof r.data&&e.error&&e.error(r.data)},onChargesCancelled:function(){e.cancel&&e.cancel()}})},buyNumbersRequestSearchNumbers:function(e){var r=this,n={resource:r.appFlags.isPhonebookConfigured?"phonebook.search":"numbers.search",data:e.data,success:function(n,t){e.hasOwnProperty("success")&&e.success(r.buyNumbersCoerceObjectToArray(n.data))},error:function(r,n){e.hasOwnProperty("error")&&e.error()}};r.appFlags.isPhonebookConfigured?t.request(n):r.callApi(n)},buyNumbersRequestSearchBlockOfNumbers:function(e){var r=this,n={resource:r.appFlags.isPhonebookConfigured?"phonebook.searchBlocks":"numbers.searchBlocks",data:e.data,success:function(r,n){e.hasOwnProperty("success")&&e.success(r.data)},error:function(r,n){e.hasOwnProperty("error")&&e.error()}};r.appFlags.isPhonebookConfigured?t.request(n):r.callApi(n)},buyNumbersRequestSearchNumbersByCity:function(e){var r=this;r.callApi({resource:"numbers.searchCity",data:e.data,success:function(r,n){e.hasOwnProperty("success")&&e.success(r.data)},error:function(r,n){e.hasOwnProperty("error")&&e.error()}})},buyNumbersRequestSearchAreaCodeByAddress:function(e){var n=this;t.request({resource:"phonebook.searchByAddress",data:{data:r.extend({distance:10},e.data)},success:function(t,i){e.hasOwnProperty("success")&&e.success(r.extend(!0,t.data,{locales:n.buyNumbersGetUniqueAreaCodes(t.data.locales)}))},error:function(r,n){404===n.status&&e.hasOwnProperty("error")&&e.error()}})}});return a});
