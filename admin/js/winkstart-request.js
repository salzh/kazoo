(function(e,t,n){var r={};e.registerResources=function(n,r){var i=this;for(var s in r){var o=r[s];t.request.define(s,"ajax",{url:o.url,decoder:function(e,t,n,r,i){if(t=="success")r(e,n.status);else{if(e==null&&"responseText"in n){var s=null;try{s=JSON.parse(n.responseText)}catch(o){}s=typeof s=="object"?s:null}i(e||s||{},n.status)}},global:typeof o.trigger_events=="boolean"?o.trigger_events:!0,contentType:o.contentType||"application/json",dataType:o.dataType||"json",type:o.verb,processData:o.verb=="GET",cache:!1,beforeSend:function(t,r){t.setRequestHeader("X-Auth-Token",e.apps[n].auth_token),typeof r.data=="object"&&"headers"in r.data&&($.each(r.data.headers,function(e,n){switch(e){case"Content-Type":t.overrideMimeType(n);break;default:t.setRequestHeader(e,n)}}),delete r.data.headers);if(r.contentType=="application/json"){if(r.type=="PUT"||r.type=="POST")r.data.verb=r.type,r.data=JSON.stringify(r.data);else if(r.type=="GET"||r.type=="DELETE")r.data=""}else typeof r.data=="object"&&r.data.data&&(r.data=r.data.data);return!0}})}},e.request=function(n,i,s,o,u){var a=this;typeof n!="boolean"&&(u=o,o=s,s=i,i=n,n=!1),"crossbar"in s&&delete s.crossbar;if(n===!0){if(i in r)return!1;r[i]=!0}s.data&&(s.data.ui_metadata=$.extend(!0,s.data.ui_metadata||{},{ui:"kazoo-ui",version:e.config.version}));var f={resourceId:i,data:s,success:function(e,t){typeof o=="function"&&o(e,t),n===!0&&delete r[i]},error:function(s,o){o===401&&i!=="auth.user_auth"?(e.alert("It appears your session expired, the UI will automatically send you back to the login screen in 5 seconds."),$.cookie("c_winkstart_auth",null),setTimeout(function(){window.location.reload()},5e3)):o=="402"&&typeof f.accept_charges=="undefined"?e.charges(s.data,function(){f.data.accept_charges=!0,t.request(f)}):typeof u=="function"&&u(s,o),n===!0&&delete r[i]}};t.request(f)},e.getJSON=function(t,n,r,i,s){e.request(t,n,r,i,s)},e.postJSON=function(t,n,r,i,s){e.request(t,n,r,i,s)},e.deleteJSON=function(t,n,r,i,s){e.request(t,n,r,i,s)},e.putJSON=function(t,n,r,i,s){e.request(t,n,r,i,s)}})(window.winkstart=window.winkstart||{},window.amplify=window.amplify||{});