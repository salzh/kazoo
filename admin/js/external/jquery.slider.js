(function(){Function.prototype.inheritFrom=function(e,t){var n=function(){};n.prototype=e.prototype,this.prototype=new n,this.prototype.constructor=this,this.prototype.baseConstructor=e,this.prototype.superClass=e.prototype;if(t)for(var r in t)this.prototype[r]=t[r]},Number.prototype.jSliderNice=function(e){var t=/^(-)?(\d+)([\.,](\d+))?$/,n=Number(this),r=String(n),i,s="",o=" ";if(i=r.match(t)){var u=i[2],a=i[4]?Number("0."+i[4]):0;if(a){var f=Math.pow(10,e?e:2);a=Math.round(a*f),sNewDecPart=String(a),s=sNewDecPart;if(sNewDecPart.length<e){var l=e-sNewDecPart.length;for(var c=0;c<l;c++)s="0"+s}s=","+s}else if(e&&e!=0){for(var c=0;c<e;c++)s+="0";s=","+s}var h;if(Number(u)<1e3)h=u+s;else{var p="",c;for(c=1;c*3<u.length;c++)p=o+u.substring(u.length-c*3,u.length-(c-1)*3)+p;h=u.substr(0,3-c*3+u.length)+p+s}return i[1]?"-"+h:h}return r},this.jSliderIsArray=function(e){return typeof e=="undefined"?!1:e instanceof Array||!(e instanceof Object)&&Object.prototype.toString.call(e)=="[object Array]"||typeof e.length=="number"&&typeof e.splice!="undefined"&&typeof e.propertyIsEnumerable!="undefined"&&!e.propertyIsEnumerable("splice")?!0:!1}})(),function(){var e={};this.jSliderTmpl=function t(n,r){var i=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[n]=e[n]||t(n);return r?i(r):i}}(),function(e){this.Draggable=function(){this._init.apply(this,arguments)},Draggable.prototype={oninit:function(){},events:function(){},onmousedown:function(){this.ptr.css({position:"absolute"})},onmousemove:function(e,t,n){this.ptr.css({left:t,top:n})},onmouseup:function(){},isDefault:{drag:!1,clicked:!1,toclick:!0,mouseup:!1},_init:function(){if(arguments.length>0){this.ptr=e(arguments[0]),this.outer=e(".draggable-outer"),this.is={},e.extend(this.is,this.isDefault);var t=this.ptr.offset();this.d={left:t.left,top:t.top,width:this.ptr.width(),height:this.ptr.height()},this.oninit.apply(this,arguments),this._events()}},_getPageCoords:function(e){return e.targetTouches&&e.targetTouches[0]?{x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY}:{x:e.pageX,y:e.pageY}},_bindEvent:function(e,t,n){var r=this;this.supportTouches_?e.get(0).addEventListener(this.events_[t],n,!1):e.bind(this.events_[t],n)},_events:function(){var t=this;this.supportTouches_=e.browser.webkit&&navigator.userAgent.indexOf("Mobile")!=-1,this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"},this._bindEvent(e(document),"move",function(e){t.is.drag&&(e.stopPropagation(),e.preventDefault(),t._mousemove(e))}),this._bindEvent(e(document),"down",function(e){t.is.drag&&(e.stopPropagation(),e.preventDefault())}),this._bindEvent(e(document),"up",function(e){t._mouseup(e)}),this._bindEvent(this.ptr,"down",function(e){return t._mousedown(e),!1}),this._bindEvent(this.ptr,"up",function(e){t._mouseup(e)}),this.ptr.find("a").click(function(){t.is.clicked=!0;if(!t.is.toclick)return t.is.toclick=!0,!1}).mousedown(function(e){return t._mousedown(e),!1}),this.events()},_mousedown:function(t){this.is.drag=!0,this.is.clicked=!1,this.is.mouseup=!1;var n=this.ptr.offset(),r=this._getPageCoords(t);this.cx=r.x-n.left,this.cy=r.y-n.top,e.extend(this.d,{left:n.left,top:n.top,width:this.ptr.width(),height:this.ptr.height()}),this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),e(document.body).height()),overflow:"hidden"}),this.onmousedown(t)},_mousemove:function(e){this.is.toclick=!1;var t=this._getPageCoords(e);this.onmousemove(e,t.x-this.cx,t.y-this.cy)},_mouseup:function(t){var n=this;this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(e.browser.mozilla?this.outer.css({overflow:"hidden"}):this.outer.css({overflow:"visible"}),e.browser.msie&&e.browser.version=="6.0"?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(t))}}}(jQuery),function(e){function n(){this.baseConstructor.apply(this,arguments)}e.slider=function(t,n){var r=e(t);return r.data("jslider")||r.data("jslider",new jSlider(t,n)),r.data("jslider")},e.fn.slider=function(t,n){function s(e){return e!==undefined}function o(e){return e!=null}var r,i=arguments;return this.each(function(){var u=e.slider(this,t);if(typeof t=="string")switch(t){case"value":if(s(i[1])&&s(i[2])){var a=u.getPointers();o(a[0])&&o(i[1])&&(a[0].set(i[1]),a[0].setIndexOver()),o(a[1])&&o(i[2])&&(a[1].set(i[2]),a[1].setIndexOver())}else if(s(i[1])){var a=u.getPointers();o(a[0])&&o(i[1])&&(a[0].set(i[1]),a[0].setIndexOver())}else r=u.getValue();break;case"prc":if(s(i[1])&&s(i[2])){var a=u.getPointers();o(a[0])&&o(i[1])&&(a[0]._set(i[1]),a[0].setIndexOver()),o(a[1])&&o(i[2])&&(a[1]._set(i[2]),a[1].setIndexOver())}else if(s(i[1])){var a=u.getPointers();o(a[0])&&o(i[1])&&(a[0]._set(i[1]),a[0].setIndexOver())}else r=u.getPrcValue();break;case"calculatedValue":var f=u.getValue().split(";");r="";for(var l=0;l<f.length;l++)r+=(l>0?";":"")+u.nice(f[l]);break;case"skin":u.setSkin(i[1])}else!t&&!n&&(jSliderIsArray(r)||(r=[]),r.push(slider))}),jSliderIsArray(r)&&r.length==1&&(r=r[0]),r||this};var t={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,round:0,value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:jSliderTmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"><i></i></i><i class="r"><i></i></i><i class="v"><i></i></i></div><div class="<%=className%>-pointer"><i></i></div><div class="<%=className%>-pointer <%=className%>-pointer-to"><i></i></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};this.jSlider=function(){return this.init.apply(this,arguments)},jSlider.prototype={init:function(n,r){this.settings=e.extend(!0,{},t.settings,r?r:{}),this.inputNode=e(n).hide(),this.settings.interval=this.settings.to-this.settings.from,this.settings.value=this.inputNode.attr("value"),this.settings.calculate&&e.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate),this.settings.onstatechange&&e.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange),this.is={init:!1},this.o={},this.create()},onstatechange:function(){},create:function(){var r=this;this.domNode=e(t.template({className:t.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()})),this.inputNode.after(this.domNode),this.drawScale(),this.settings.skin&&this.settings.skin.length>0&&this.setSkin(this.settings.skin),this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},e.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(t.selector+"value").not(t.selector+"value-to")},1:{o:this.domNode.find(t.selector+"value").filter(t.selector+"value-to")}},limits:{0:this.domNode.find(t.selector+"label").not(t.selector+"label-to"),1:this.domNode.find(t.selector+"label").filter(t.selector+"label-to")}}),e.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")}),e.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")}),r.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single")),r.settings.limits||this.domNode.addDependClass("limitless"),this.domNode.find(t.selector+"pointer").each(function(e){var t=r.settings.value.split(";")[e];if(t){r.o.pointers[e]=new n(this,e,r);var i=r.settings.value.split(";")[e-1];i&&new Number(t)<new Number(i)&&(t=i),t=t<r.settings.from?r.settings.from:t,t=t>r.settings.to?r.settings.to:t,r.o.pointers[e].set(t,!0)}}),this.o.value=this.domNode.find(".v"),this.is.init=!0,e.each(this.o.pointers,function(e){r.redraw(this)}),function(t){e(window).resize(function(){t.onresize()})}(this)},setSkin:function(e){this.skin_&&this.domNode.removeDependClass(this.skin_,"_"),this.domNode.addDependClass(this.skin_=e,"_")},setPointersIndex:function(t){e.each(this.getPointers(),function(e){this.index(e)})},getPointers:function(){return this.o.pointers},generateScale:function(){if(this.settings.scale&&this.settings.scale.length>0){var e="",t=this.settings.scale,n=Math.round(100/(t.length-1)*10)/10;for(var r=0;r<t.length;r++)e+='<span style="left: '+r*n+'%">'+(t[r]!="|"?"<ins>"+t[r]+"</ins>":"")+"</span>";return e}return""},drawScale:function(){this.domNode.find(t.selector+"scale span ins").each(function(){e(this).css({marginLeft:-e(this).outerWidth()/2})})},onresize:function(){var t=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},e.each(this.o.pointers,function(e){t.redraw(this)})},limits:function(e,t){if(!this.settings.smooth){var n=this.settings.step*100/this.settings.interval;e=Math.round(e/n)*n}var r=this.o.pointers[1-t.uid];return r&&t.uid&&e<r.value.prc&&(e=r.value.prc),r&&!t.uid&&e>r.value.prc&&(e=r.value.prc),e<0&&(e=0),e>100&&(e=100),Math.round(e*10)/10},redraw:function(e){if(!this.is.init)return!1;this.setValue(),this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}),this.o.labels[e.uid].value.html(this.nice(e.value.origin)),this.redrawLabels(e)},redrawLabels:function(e){function t(e,t,r){return t.margin=-t.label/2,label_left=t.border+t.margin,label_left<0&&(t.margin-=label_left),t.border+t.label/2>n.sizes.domWidth?(t.margin=0,t.right=!0):t.right=!1,e.o.css({left:r+"%",marginLeft:t.margin,right:"auto"}),t.right&&e.o.css({left:"auto",right:0}),t}var n=this,r=this.o.labels[e.uid],i=e.value.prc,s={label:r.o.outerWidth(),right:!1,border:i*this.sizes.domWidth/100};if(!this.settings.single){var o=this.o.pointers[1-e.uid],u=this.o.labels[o.uid];switch(e.uid){case 0:s.border+s.label/2>u.o.offset().left-this.sizes.domOffset.left?(u.o.css({visibility:"hidden"}),u.value.html(this.nice(o.value.origin)),r.o.css({visibility:"visible"}),i=(o.value.prc-i)/2+i,o.value.prc!=e.value.prc&&(r.value.html(this.nice(e.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(o.value.origin)),s.label=r.o.outerWidth(),s.border=i*this.sizes.domWidth/100)):u.o.css({visibility:"visible"});break;case 1:s.border-s.label/2<u.o.offset().left-this.sizes.domOffset.left+u.o.outerWidth()?(u.o.css({visibility:"hidden"}),u.value.html(this.nice(o.value.origin)),r.o.css({visibility:"visible"}),i=(i-o.value.prc)/2+o.value.prc,o.value.prc!=e.value.prc&&(r.value.html(this.nice(o.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(e.value.origin)),s.label=r.o.outerWidth(),s.border=i*this.sizes.domWidth/100)):u.o.css({visibility:"visible"})}}s=t(r,s,i);if(u){var s={label:u.o.outerWidth(),right:!1,border:o.value.prc*this.sizes.domWidth/100};s=t(u,s,o.value.prc)}this.redrawLimits()},redrawLimits:function(){if(this.settings.limits){var e=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||key==0){var t=this.o.pointers[key],n=this.o.labels[t.uid],r=n.o.offset().left-this.sizes.domOffset.left,i=this.o.limits[0];r<i.outerWidth()&&(e[0]=!1);var i=this.o.limits[1];r+n.o.outerWidth()>this.sizes.domWidth-i.outerWidth()&&(e[1]=!1)}for(var s=0;s<e.length;s++)e[s]?this.o.limits[s].fadeIn("fast"):this.o.limits[s].fadeOut("fast")}},setValue:function(){var e=this.getValue();this.inputNode.attr("value",e),this.onstatechange.call(this,e)},getValue:function(){if(!this.is.init)return!1;var t=this,n="";return e.each(this.o.pointers,function(e){this.value.prc!=undefined&&!isNaN(this.value.prc)&&(n+=(e>0?";":"")+t.prcToValue(this.value.prc))}),n},getPrcValue:function(){if(!this.is.init)return!1;var t=this,n="";return e.each(this.o.pointers,function(e){this.value.prc!=undefined&&!isNaN(this.value.prc)&&(n+=(e>0?";":"")+this.value.prc)}),n},prcToValue:function(e){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var t=this.settings.heterogeneity,n=0,r=this.settings.from;for(var i=0;i<=t.length;i++){if(t[i])var s=t[i].split("/");else var s=[100,this.settings.to];s[0]=new Number(s[0]),s[1]=new Number(s[1]);if(e>=n&&e<=s[0])var o=r+(e-n)*(s[1]-r)/(s[0]-n);n=s[0],r=s[1]}}else var o=this.settings.from+e*this.settings.interval/100;return this.round(o)},valueToPrc:function(e,t){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var n=this.settings.heterogeneity,r=0,i=this.settings.from;for(var s=0;s<=n.length;s++){if(n[s])var o=n[s].split("/");else var o=[100,this.settings.to];o[0]=new Number(o[0]),o[1]=new Number(o[1]);if(e>=i&&e<=o[1])var u=t.limits(r+(e-i)*(o[0]-r)/(o[1]-i));r=o[0],i=o[1]}}else var u=t.limits((e-this.settings.from)*100/this.settings.interval);return u},round:function(e){return e=Math.round(e/this.settings.step)*this.settings.step,this.settings.round?e=Math.round(e*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):e=Math.round(e),e},nice:function(e){return e=e.toString().replace(/,/gi,"."),e=e.toString().replace(/ /gi,""),Number.prototype.jSliderNice?(new Number(e)).jSliderNice(this.settings.round).replace(/-/gi,"&minus;"):new Number(e)}},n.inheritFrom(Draggable,{oninit:function(e,t,n){this.uid=t,this.parent=n,this.value={},this.settings=this.parent.settings},onmousedown:function(e){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()},this.ptr.addDependClass("hover"),this.setIndexOver()},onmousemove:function(e,t){var n=this._getPageCoords(e);this._set(this.calc(n.x))},onmouseup:function(t){this.parent.settings.callback&&e.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue()),this.ptr.removeDependClass("hover")},setIndexOver:function(){this.parent.setPointersIndex(1),this.index(2)},index:function(e){this.ptr.css({zIndex:e})},limits:function(e){return this.parent.limits(e,this)},calc:function(e){var t=this.limits((e-this._parent.offset.left)*100/this._parent.width);return t},set:function(e,t){this.value.origin=this.parent.round(e),this._set(this.parent.valueToPrc(e,this),t)},_set:function(e,t){t||(this.value.origin=this.parent.prcToValue(e)),this.value.prc=e,this.ptr.css({left:e+"%"}),this.parent.redraw(this)}})}(jQuery);