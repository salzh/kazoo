(function(e){function t(e){return Math.sin((e-(e-Math.PI)/8/Math.PI)/2)}function n(e,n,r,i,s){var o=0,u=n-e,a=Math.abs(u),f=r;return i==0&&(f+=s),f>0&&a>.01&&a<6.282&&(o=parseFloat(f)/2/t(u)),o}function r(t,n,r){r=r||{},r.axesDefaults=r.axesDefaults||{},r.legend=r.legend||{},r.seriesDefaults=r.seriesDefaults||{};var i=!1;if(r.seriesDefaults.renderer==e.jqplot.PieRenderer)i=!0;else if(r.series)for(var s=0;s<r.series.length;s++)r.series[s].renderer==e.jqplot.PieRenderer&&(i=!0);i&&(r.axesDefaults.renderer=e.jqplot.PieAxisRenderer,r.legend.renderer=e.jqplot.PieLegendRenderer,r.legend.preDraw=!0,r.seriesDefaults.pointLabels={show:!1})}function i(t,n,r){for(var i=0;i<this.series.length;i++)this.series[i].renderer.constructor==e.jqplot.PieRenderer&&this.series[i].highlightMouseOver&&(this.series[i].highlightMouseDown=!1)}function s(t){for(var n=0;n<this.series.length;n++)this.series[n].seriesColors=this.seriesColors,this.series[n].colorGenerator=e.jqplot.colorGenerator}function o(e,t,n){var r=e.series[t],i=e.plugins.pieRenderer.highlightCanvas;i._ctx.clearRect(0,0,i._ctx.canvas.width,i._ctx.canvas.height),r._highlightedPoint=n,e.plugins.pieRenderer.highlightedSeriesIndex=t,r.renderer.drawSlice.call(r,i._ctx,r._sliceAngles[n][0],r._sliceAngles[n][1],r.highlightColorGenerator.get(n),!1)}function u(e){var t=e.plugins.pieRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var n=0;n<e.series.length;n++)e.series[n]._highlightedPoint=null;e.plugins.pieRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function a(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data],a=jQuery.Event("jqplotDataMouseOver");a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,s);if(i.series[s[0]].highlightMouseOver&&(s[0]!=i.plugins.pieRenderer.highlightedSeriesIndex||s[1]!=i.series[s[0]]._highlightedPoint)){var f=jQuery.Event("jqplotDataHighlight");f.which=e.which,f.pageX=e.pageX,f.pageY=e.pageY,i.target.trigger(f,s),o(i,s[0],s[1])}}else r==null&&u(i)}function f(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data];if(i.series[s[0]].highlightMouseDown&&(s[0]!=i.plugins.pieRenderer.highlightedSeriesIndex||s[1]!=i.series[s[0]]._highlightedPoint)){var a=jQuery.Event("jqplotDataHighlight");a.which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,s),o(i,s[0],s[1])}}else r==null&&u(i)}function l(e,t,n,r,i){var s=i.plugins.pieRenderer.highlightedSeriesIndex;s!=null&&i.series[s].highlightMouseDown&&u(i)}function c(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data],o=jQuery.Event("jqplotDataClick");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,i.target.trigger(o,s)}}function h(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data],o=i.plugins.pieRenderer.highlightedSeriesIndex;o!=null&&i.series[o].highlightMouseDown&&u(i);var a=jQuery.Event("jqplotDataRightClick");a.which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,s)}}function p(){this.plugins.pieRenderer&&this.plugins.pieRenderer.highlightCanvas&&(this.plugins.pieRenderer.highlightCanvas.resetCanvas(),this.plugins.pieRenderer.highlightCanvas=null),this.plugins.pieRenderer={highlightedSeriesIndex:null},this.plugins.pieRenderer.highlightCanvas=new e.jqplot.GenericCanvas;var t=e(this.targetId+" .jqplot-data-label");t.length?e(t[0]).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this));var n=this.plugins.pieRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){u(e.data.plot)})}e.jqplot.PieRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.PieRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.PieRenderer.prototype.constructor=e.jqplot.PieRenderer,e.jqplot.PieRenderer.prototype.init=function(t,n){this.diameter=null,this.padding=20,this.sliceMargin=0,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.52,this.dataLabelNudge=2,this.dataLabelCenterOn=!0,this.startAngle=0,this.tickRenderer=e.jqplot.PieTickRenderer,this._drawData=!0,this._type="pie",t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1),e.extend(!0,this,t),this.sliceMargin<0&&(this.sliceMargin=0),this._diameter=null,this._radius=null,this._sliceAngles=[],this._highlightedPoint=null;if(this.highlightColors.length==0)for(var r=0;r<this.seriesColors.length;r++){var o=e.jqplot.getColorComponents(this.seriesColors[r]),u=[o[0],o[1],o[2]],d=u[0]+u[1]+u[2];for(var v=0;v<3;v++)u[v]=d>570?u[v]*.8:u[v]+.3*(255-u[v]),u[v]=parseInt(u[v],10);this.highlightColors.push("rgb("+u[0]+","+u[1]+","+u[2]+")")}this.highlightColorGenerator=new e.jqplot.ColorGenerator(this.highlightColors),n.postParseOptionsHooks.addOnce(s),n.postInitHooks.addOnce(i),n.eventListenerHooks.addOnce("jqplotMouseMove",a),n.eventListenerHooks.addOnce("jqplotMouseDown",f),n.eventListenerHooks.addOnce("jqplotMouseUp",l),n.eventListenerHooks.addOnce("jqplotClick",c),n.eventListenerHooks.addOnce("jqplotRightClick",h),n.postDrawHooks.addOnce(p)},e.jqplot.PieRenderer.prototype.setGridData=function(e){var t=[],n=[],r=this.startAngle/180*Math.PI,i=0;this._drawData=!1;for(var s=0;s<this.data.length;s++)this.data[s][1]!=0&&(this._drawData=!0),t.push(this.data[s][1]),n.push([this.data[s][0]]),s>0&&(t[s]+=t[s-1]),i+=this.data[s][1];var o=Math.PI*2/t[t.length-1];for(var s=0;s<t.length;s++)n[s][1]=t[s]*o,n[s][2]=this.data[s][1]/i;this.gridData=n},e.jqplot.PieRenderer.prototype.makeGridData=function(e,t){var n=[],r=[],i=0,s=this.startAngle/180*Math.PI;this._drawData=!1;for(var o=0;o<e.length;o++)this.data[o][1]!=0&&(this._drawData=!0),n.push(e[o][1]),r.push([e[o][0]]),o>0&&(n[o]+=n[o-1]),i+=e[o][1];var u=Math.PI*2/n[n.length-1];for(var o=0;o<n.length;o++)r[o][1]=n[o]*u,r[o][2]=e[o][1]/i;return r},e.jqplot.PieRenderer.prototype.drawSlice=function(e,t,r,i,s){function v(n){r>6.282+this.startAngle&&(r=6.282+this.startAngle,t>r&&(t=6.281+this.startAngle));if(t>=r)return;e.beginPath(),e.fillStyle=i,e.strokeStyle=i,e.lineWidth=a,e.arc(0,0,n,t,r,!1),e.lineTo(0,0),e.closePath(),u?e.fill():e.stroke()}if(this._drawData){var o=this._radius,u=this.fill,a=this.lineWidth,f=this.sliceMargin;this.fill==0&&(f+=this.lineWidth),e.save(),e.translate(this._center[0],this._center[1]);var l=n(t,r,this.sliceMargin,this.fill,this.lineWidth),c=l*Math.cos((t+r)/2),h=l*Math.sin((t+r)/2);r-t<=Math.PI?o-=l:o+=l,e.translate(c,h);if(s){for(var p=0,d=this.shadowDepth;p<d;p++)e.save(),e.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),v(o);for(var p=0,d=this.shadowDepth;p<d;p++)e.restore()}else v(o);e.restore()}},e.jqplot.PieRenderer.prototype.draw=function(t,r,i,s){var o,u=i!=undefined?i:{},a=0,f=0,l=1,c=new e.jqplot.ColorGenerator(this.seriesColors);if(i.legendInfo&&i.legendInfo.placement=="insideGrid"){var h=i.legendInfo;switch(h.location){case"nw":a=h.width+h.xoffset;break;case"w":a=h.width+h.xoffset;break;case"sw":a=h.width+h.xoffset;break;case"ne":a=h.width+h.xoffset,l=-1;break;case"e":a=h.width+h.xoffset,l=-1;break;case"se":a=h.width+h.xoffset,l=-1;break;case"n":f=h.height+h.yoffset;break;case"s":f=h.height+h.yoffset,l=-1;break;default:}}var p=u.shadow!=undefined?u.shadow:this.shadow,d=u.fill!=undefined?u.fill:this.fill,v=t.canvas.width,m=t.canvas.height,g=v-a-2*this.padding,y=m-f-2*this.padding,b=Math.min(g,y),w=b;this._sliceAngles=[];var E=this.sliceMargin;this.fill==0&&(E+=this.lineWidth);var S,x=0,T,N,C,k,L=this.startAngle/180*Math.PI;for(var o=0,A=r.length;o<A;o++)N=o==0?L:r[o-1][1]+L,C=r[o][1]+L,this._sliceAngles.push([N,C]),S=n(N,C,this.sliceMargin,this.fill,this.lineWidth),Math.abs(C-N)>Math.PI&&(x=Math.max(S,x));this.diameter!=null&&this.diameter>0?this._diameter=this.diameter-2*x:this._diameter=w-2*x;if(this._diameter<6){e.jqplot.log("Diameter of pie too small, not rendering.");return}var O=this._radius=this._diameter/2;this._center=[(v-l*a)/2+l*a+x*Math.cos(L),(m-l*f)/2+l*f+x*Math.sin(L)];if(this.shadow)for(var o=0,A=r.length;o<A;o++)k="rgba(0,0,0,"+this.shadowAlpha+")",this.renderer.drawSlice.call(this,t,this._sliceAngles[o][0],this._sliceAngles[o][1],k,!0);for(var o=0;o<r.length;o++){this.renderer.drawSlice.call(this,t,this._sliceAngles[o][0],this._sliceAngles[o][1],c.next(),!1);if(this.showDataLabels&&r[o][2]*100>=this.dataLabelThreshold){var M,_=(this._sliceAngles[o][0]+this._sliceAngles[o][1])/2,D;this.dataLabels=="label"?(M=this.dataLabelFormatString||"%s",D=e.jqplot.sprintf(M,r[o][0])):this.dataLabels=="value"?(M=this.dataLabelFormatString||"%d",D=e.jqplot.sprintf(M,this.data[o][1])):this.dataLabels=="percent"?(M=this.dataLabelFormatString||"%d%%",D=e.jqplot.sprintf(M,r[o][2]*100)):this.dataLabels.constructor==Array&&(M=this.dataLabelFormatString||"%s",D=e.jqplot.sprintf(M,this.dataLabels[o]));var P=this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,H=this._center[0]+Math.cos(_)*P+this.canvas._offsets.left,B=this._center[1]+Math.sin(_)*P+this.canvas._offsets.top,F=e('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;">'+D+"</div>").insertBefore(s.eventCanvas._elem);this.dataLabelCenterOn?(H-=F.width()/2,B-=F.height()/2):(H-=F.width()*Math.sin(_/2),B-=F.height()/2),H=Math.round(H),B=Math.round(B),F.css({left:H,top:B})}}},e.jqplot.PieAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.PieAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.PieAxisRenderer.prototype.constructor=e.jqplot.PieAxisRenderer,e.jqplot.PieAxisRenderer.prototype.init=function(t){this.tickRenderer=e.jqplot.PieTickRenderer,e.extend(!0,this,t),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},e.jqplot.PieLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.PieLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.PieLegendRenderer.prototype.constructor=e.jqplot.PieLegendRenderer,e.jqplot.PieLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,e.extend(!0,this,t)},e.jqplot.PieLegendRenderer.prototype.draw=function(){var t=this;if(this.show){var n=this._series;this._elem=e(document.createElement("table")),this._elem.addClass("jqplot-table-legend");var r={position:"absolute"};this.background&&(r.background=this.background),this.border&&(r.border=this.border),this.fontSize&&(r.fontSize=this.fontSize),this.fontFamily&&(r.fontFamily=this.fontFamily),this.textColor&&(r.textColor=this.textColor),this.marginTop!=null&&(r.marginTop=this.marginTop),this.marginBottom!=null&&(r.marginBottom=this.marginBottom),this.marginLeft!=null&&(r.marginLeft=this.marginLeft),this.marginRight!=null&&(r.marginRight=this.marginRight),this._elem.css(r);var i=!1,s=!1,o,u,a=n[0],f=new e.jqplot.ColorGenerator(a.seriesColors);if(a.show){var l=a.data;this.numberRows?(o=this.numberRows,this.numberColumns?u=this.numberColumns:u=Math.ceil(l.length/o)):this.numberColumns?(u=this.numberColumns,o=Math.ceil(l.length/this.numberColumns)):(o=l.length,u=1);var c,h,p,d,v,m,g,y,b=0,w,E;for(c=0;c<o;c++){p=e(document.createElement("tr")),p.addClass("jqplot-table-legend"),s?p.prependTo(this._elem):p.appendTo(this._elem);for(h=0;h<u;h++)b<l.length&&(m=this.labels[b]||l[b][0].toString(),y=f.next(),s?c==o-1?i=!1:i=!0:c>0?i=!0:i=!1,g=i?this.rowSpacing:"0",d=e(document.createElement("td")),d.addClass("jqplot-table-legend jqplot-table-legend-swatch"),d.css({textAlign:"center",paddingTop:g}),w=e(document.createElement("div")),w.addClass("jqplot-table-legend-swatch-outline"),E=e(document.createElement("div")),E.addClass("jqplot-table-legend-swatch"),E.css({backgroundColor:y,borderColor:y}),d.append(w.append(E)),v=e(document.createElement("td")),v.addClass("jqplot-table-legend jqplot-table-legend-label"),v.css("paddingTop",g),this.escapeHtml?v.text(m):v.html(m),s?(v.prependTo(p),d.prependTo(p)):(d.appendTo(p),v.appendTo(p)),i=!0),b++}}}return this._elem},e.jqplot.PieRenderer.prototype.handleMove=function(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data];i.target.trigger("jqplotDataMouseOver",s),i.series[s[0]].highlightMouseOver&&(s[0]!=i.plugins.pieRenderer.highlightedSeriesIndex||s[1]!=i.series[s[0]]._highlightedPoint)&&(i.target.trigger("jqplotDataHighlight",s),o(i,s[0],s[1]))}else r==null&&u(i)},e.jqplot.preInitHooks.push(r),e.jqplot.PieTickRenderer=function(){e.jqplot.AxisTickRenderer.call(this)},e.jqplot.PieTickRenderer.prototype=new e.jqplot.AxisTickRenderer,e.jqplot.PieTickRenderer.prototype.constructor=e.jqplot.PieTickRenderer})(jQuery);