!function(e){"use strict";function r(){var e=this,n=setTimeout(function(){e.$element.unbind(t),i.call(e)},500);this.$element.one(t,function(){clearTimeout(n),i.call(e)})}function i(e){this.$element.hide().trigger("hidden"),s.call(this)}function s(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.settings.backdrop){var s=e.support.transition&&i;this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.settings.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),s?this.$backdrop.one(t,n):n()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t,e.proxy(o,this)):o.call(this)):n&&n()}function o(){this.$backdrop.remove(),this.$backdrop=null}function u(){var t=this;this.isShown&&this.settings.keyboard?e(document).bind("keyup.modal",function(e){e.which==27&&t.hide()}):this.isShown||e(document).unbind("keyup.modal")}var t;e(document).ready(function(){e.support.transition=function(){var e=document.body||document.documentElement,t=e.style,n=t.transition!==undefined||t.WebkitTransition!==undefined||t.MozTransition!==undefined||t.MsTransition!==undefined||t.OTransition!==undefined;return n}(),e.support.transition&&(t="TransitionEnd",e.browser.webkit?t="webkitTransitionEnd":e.browser.mozilla?t="transitionend":e.browser.opera&&(t="oTransitionEnd"))});var n=function(t,n){return this.settings=e.extend({},e.fn.modal.defaults,n),this.$element=e(t).delegate(".close","click.modal",e.proxy(this.hide,this)),this.settings.show&&this.show(),this};n.prototype={toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var n=this;return this.isShown=!0,this.$element.trigger("show"),u.call(this),s.call(this,function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.appendTo(document.body).show(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),r?n.$element.one(t,function(){n.$element.trigger("shown")}):n.$element.trigger("shown")}),this},hide:function(t){t&&t.preventDefault();if(!this.isShown)return this;var n=this;return this.isShown=!1,u.call(this),this.$element.trigger("hide").removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?r.call(this):i.call(this),this}},e.fn.modal=function(t){var r=this.data("modal");return r?t===!0?r:(typeof t=="string"?r[t]():r&&r.toggle(),this):(typeof t=="string"&&(t={show:/show|toggle/.test(t)}),this.each(function(){e(this).data("modal",new n(this,t))}))},e.fn.modal.Modal=n,e.fn.modal.defaults={backdrop:!1,keyboard:!1,show:!1},e(document).ready(function(){e("body").delegate("[data-controls-modal]","click",function(t){t.preventDefault();var n=e(this).data("show",!0);e("#"+n.attr("data-controls-modal")).modal(n.data())})})}(window.jQuery||window.ender);