(function(e,t,n){e.error_message={process_error:function(t){var n=function(e){var t=[],r,i=this;return $.each(e,function(e,i){typeof i=="object"?($.each(i,function(t,n){i[e+"."+t]=n,delete i[t]}),r=n(this),$.each(r,function(e,n){t.push({key:n.key,value:n.value})})):t.push({key:e,value:i})}),t},r=function(e){var t=n(e||{}),r="";return $.each(t,function(e,t){r+=t.key+": "+t.value+"<br/>"}),r};return function(n,i){var s="";i!==400||n.message!=="invalid data"&&n.message!=="braintree api error"?"credit"in n.data?s+=n.data.credit:$.inArray(i,["400","401","403","404","405","413","500","503",400,401,403,404,405,413,500,503])>=0?n.message==="no_payment_token"?s+="No credit card found for your account.":(s+="Error status code : "+i+"<br/><br/><br/>",s+=e.print_r(n)):s+="Unknown error: "+i:(s+="Schema Error:<br/><br/>",s+=r(n.data||{})),s!=""?typeof t=="function"?e.alert("error",s,function(){t(n,i)}):e.alert("error",s):typeof t=="function"&&t(n,i)}}},e.validate={set:function(e,t){var n=this,r=t||$("body");$.isArray(e)?$.each(e,function(e,t){"name"in t&&"regex"in t&&n.add($(t.name,r),t.regex)}):"name"in e&&"regex"in e&&n.add($(e.name,r),e.regex)},is_valid:function(t,n,r,i){var s,o,u;typeof n=="function"&&(i=r,r=n,n=null);var i=i||function(){e.alert("There are some errors on the form, please correct it")};s=n||$("body"),$.isArray(t)?(o=t.length,$.each(t,function(e,t){"name"in t&&"regex"in t&&(u=$(t.name,s).trigger("keyup").parents(".validated").hasClass("valid"),u&&o--)})):(o=1,"name"in t&&"regex"in t&&(u=$(t.name,s).trigger("keyup").parents(".validated").hasClass("valid"),u&&o--)),o?typeof i=="function"&&i():typeof r=="function"&&r()},add:function(e,t){e.wrap('<span class="validated" />'),e.keyup(function(){e.val().match(t)==null?e.parents(".validated").removeClass("valid").addClass("invalid"):e.parents(".validated").removeClass("invalid").addClass("valid")})},save:function(e,t){e.trigger("keyup")}}})(window.winkstart=window.winkstart||{},window.amplify=window.amplify||{});