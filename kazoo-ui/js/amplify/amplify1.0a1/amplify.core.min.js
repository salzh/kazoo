(function(e){var t=[].slice,n={};this.amplify={publish:function(r){var s=t.call(arguments,1),o;return n[r]?(e.each(n[r],function(e,t){return o=t.callback.apply(t.context,s)}),o!==!1):!0},subscribe:function(e,t,r,i){arguments.length===3&&typeof r=="number"&&(i=r,r=t,t=null),arguments.length===2&&(r=t,t=null),i=i||10,n[e]||(n[e]=[]);for(var s=n[e].length-1,o={callback:r,context:t,priority:i};s>=0;s--)if(n[e][s].priority<=i)return n[e].splice(s+1,0,o),r;return n[e].unshift(o),r},unsubscribe:function(t,r){n[t]&&e.each(n[t],function(e,i){if(i.callback===r)return n[t].splice(e,1),!1})}}})(jQuery);