(function(e,t){var n=[].slice,r={};this.amplify={publish:function(t){var i=n.call(arguments,1),s;return r[t]?(e.each(r[t],function(e,t){return s=t.callback.apply(t.context,i)}),s!==!1):!0},subscribe:function(e,t,n,i){arguments.length===3&&typeof n=="number"&&(i=n,n=t,t=null),arguments.length===2&&(n=t,t=null),i=i||10,r[e]||(r[e]=[]);var s=r[e].length-1,o={callback:n,context:t,priority:i};for(;s>=0;s--)if(r[e][s].priority<=i)return r[e].splice(s+1,0,o),n;return r[e].unshift(o),n},unsubscribe:function(t,n){if(!r[t])return;e.each(r[t],function(e,i){if(i.callback===n)return r[t].splice(e,1),!1})}}})(jQuery);