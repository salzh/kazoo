(function(e,t){var n=[].slice,r={},i=e.amplify={publish:function(e){var t=n.call(arguments,1),i,s,o=0,u;if(!r[e])return!0;for(s=r[e].length;o<s;o++){i=r[e][o],u=i.callback.apply(i.context,t);if(u===!1)break}return u!==!1},subscribe:function(e,t,n,i){arguments.length===3&&typeof n=="number"&&(i=n,n=t,t=null),arguments.length===2&&(n=t,t=null),i=i||10;var s=0,o=e.split(/\s/),u=o.length;for(;s<u;s++){e=o[s],r[e]||(r[e]=[]);var a=r[e].length-1,f={callback:n,context:t,priority:i};for(;a>=0;a--)if(r[e][a].priority<=i)return r[e].splice(a+1,0,f),n;r[e].unshift(f)}return n},unsubscribe:function(e,t){if(!r[e])return;var n=r[e].length,i=0;for(;i<n;i++)if(r[e][i].callback===t){r[e].splice(i,1);break}}}})(this);