(function(e,t){e.widget("ui.listpanel",{options:{searchable:!0,animated:"fast",show:"slideDown",hide:"slideUp",publisher:function(){},notifyMethod:""},_create:function(){this.id=this.element.attr("id")},_init:function(){this.element.empty(),this.pane_wrapper=e('<div class="left_side_bar"></div>').appendTo(this.element),this.options.new_entity_label&&(this.flow_div=e('<div class="add_flow"><span class="plus_btn" href="#"/><span class="add_flow_text">'+this.options.new_entity_label+"</span></div>").appendTo(this.pane_wrapper));var t="";t+='<div class="new_search_box">',t+='<input type="text" placeholder="Search" class="new_searchfield search" name="search">',t+='<span class="icon_wrapper"><span class="search_icon"/></span>',t+='<div class="clear"></div>',t+="</div>",this.search_div=e(t).appendTo(this.pane_wrapper),this.listContainer=e('<div class="list-panel-anchor"></div>').appendTo(this.pane_wrapper),this.list=e("<ul></ul>").appendTo(this.listContainer);var n=this;e(".searchsubmit2").click(function(){e(".searchfield, .search").val("")}),this._populateLists(this.options.data),this._registerViewEvents(this.listContainer.find("li")),this.options.new_entity_label&&this._registerAddEvents(this.flow_div),this.options.searchable?this._registerSearchEvents(this.search_div.find("input.search")):e(".search").hide(),e(function(){var t=e(window).height(),n=["#ws-content > .container-fluid",".list-panel-anchor"];for(var r in n)t-=(e(n[r]).position()||{}).top||0;t+="px",e(".list-panel-anchor").css({height:t,"min-height":t});var i=e(".list-panel-anchor").jScrollPane({verticalDragMaxHeight:15}),s=e(i).data("jsp"),o;e(window).bind("resize",function(){if(e.browser.msie)o||(o=setTimeout(function(){s.reinitialise(),o=null},50));else{var t=(e(".sidebar").position()||{}).top||0,n=e(document).height()-185-t+"px";e(".list-panel-anchor").css({"min-height":n}),e(".list-panel-anchor").css({height:n}),s.reinitialise()}})})},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.pane_wrapper.remove(),e.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(t){this.list.children(".list-element").remove();var n=this,r=e(t.map(function(e){return n._getListNode(e).appendTo(n.list).show()}))},_getListNode:function(t){var n="";n+='<li class="list-element" title="'+t.title+'" id="'+t.id+'">',n+='<a data-action="media" data-module="activate" href="#">'+t.title+"</a>",n+="</li>";var r=e(n).hide();return e.data(r[0],"data",t),r},_filter:function(t){var n=e(this),r=t.children("li"),i=r.map(function(){return e(this).text().toLowerCase()}),s=e.trim(n.val().toLowerCase()),o=[];s?(r.hide(),i.each(function(e){this.indexOf(s)>-1&&o.push(e)}),e.each(o,function(){e(r[this]).show()})):r.show()},_registerHoverEvents:function(e){},_registerViewEvents:function(t){var n=this;t.click(function(){return"notifyParent"in n.options?n.options.publisher(!0,n.options.notifyMethod,e.data(this,"data"),n.options.notifyParent):n.options.publisher(!0,n.options.notifyMethod,e.data(this,"data")),!1})},_registerAddEvents:function(e){var t=this;e.click(function(){return"notifyParent"in t.options?t.options.publisher(!0,t.options.notifyCreateMethod,{},t.options.notifyParent):t.options.publisher(!0,t.options.notifyCreateMethod,{}),!1})},_registerSearchEvents:function(t){var n=this;t.keypress(function(e){if(e.keyCode==13)return!1}).keyup(function(){var t=e(".list-panel-anchor").data("jsp");t.scrollToY(0),n._filter.apply(this,[n.list])})}})})(jQuery);